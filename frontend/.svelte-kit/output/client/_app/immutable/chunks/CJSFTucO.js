import{I as h,J as d}from"./Ce0mKzmf.js";import{u as m,a as f,b as p}from"./BZrj67Xi.js";import{M as O}from"./DrwrpQH_.js";const l=h(O.myBets);async function E(s){var u,i;const o=d(m);try{if(o.balance<s.stake)return{success:!1,error:"Insufficient balance"};const e=(await f.bets.place(s)).data;return l.update(t=>[e,...t]),p(o.balance-s.stake),{success:!0,bet:e}}catch(a){if(console.error("Place bet error:",a),a.code==="ERR_NETWORK"){const e={id:Date.now(),...s,status:"OPEN",placedAt:new Date,time:"Just now"};return l.update(t=>[e,...t]),p(o.balance-s.stake),{success:!0,bet:e,demo:!0}}return{success:!1,error:((i=(u=a.response)==null?void 0:u.data)==null?void 0:i.message)||"Failed to place bet"}}}async function B(s){var i,a;const o=d(m),u=d(l);try{const e=u.find(c=>c.id===s);if(!e||!e.canCashOut)return{success:!1,error:"Cannot cash out this bet"};const r=(await f.bets.cashout(s)).data.amount;return l.update(c=>c.map(n=>n.id===s?{...n,status:"CASHED_OUT",actualReturn:r}:n)),p(o.balance+r),{success:!0,amount:r}}catch(e){if(console.error("Cash out error:",e),e.code==="ERR_NETWORK"){const t=u.find(c=>c.id===s),r=(t==null?void 0:t.cashOutValue)||0;return l.update(c=>c.map(n=>n.id===s?{...n,status:"CASHED_OUT",actualReturn:r}:n)),p(o.balance+r),{success:!0,amount:r,demo:!0}}return{success:!1,error:((a=(i=e.response)==null?void 0:i.data)==null?void 0:a.message)||"Failed to cash out"}}}export{l as b,B as c,E as p};
